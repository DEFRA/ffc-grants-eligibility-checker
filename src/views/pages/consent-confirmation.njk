{% extends 'layout.njk' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% set items = meta.items %}

{% block pageTitle %}
  {{meta.messageHeader1}}{{meta.titleText}} - {{siteTitle}}
{% endblock %}
{# Do we want to extract back link? #}
{% block beforeContent %}  

  {% if meta.previousPageId %}
    {{ govukBackLink({
        id: "backLink",
        text: "Back",
        href: meta.previousPageId
      })
    }}
  {% endif %}
{% endblock %}

{% set checkboxConfirmOptional = {
    idPrefix: meta.consentOptionalData.idPrefix,
    name: meta.consentOptionalData.name,
    items: [{
      value: items.items[0].value,
      text: items.items[0].text,
      checked: items.items[0].checked,
      selected: items.items[0].selected
    }]
  }
%}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="govuk-form-group" style="margin-bottom: 0px;">
          {%if meta.messageHeader1%}
          <h1 class="govuk-heading-l">{{meta.messageHeader1}}</h1>
          {% endif %}

          <p class="govuk-body">{{ meta.messageContent[0] }}</p>
          <p class="govuk-body">{{ meta.messageContent[1] }}</p>
          <p class="govuk-body">{{ meta.messageContent[2] }}</p>
          <p class="govuk-body">{{ meta.messageContent[3] }}</p>
          <h3 class="govuk-heading-s">{{ meta.messageHeader3 }}</h3>
          <p class="govuk-body govuk-!-margin-bottom-2">{{ meta.messageContent[4] }}</p>
          <p class="govuk-body">{{ meta.messageContent[5] }}</p>
        </fieldset>
      </div>
      {%if meta.currentPageId === 'consent' %}
        <form id="questionForm" onsubmit="handleSubmit(event)" autocomplete="off" novalidate="novalidate">
          <fieldset class="govuk-fieldset" aria-describedby="consent-to-terms-hint">
            {{ govukCheckboxes(checkboxConfirmOptional) }}
            {{ govukButton({
              text: "Confirm and send",
              attributes: {id: "btnConfirmSend"},
              classes: "govuk-!-margin-top-6"
            }) }}
          </fieldset>
        </form>
        {{ govukWarningText(meta.warning) }}
      {% endif %}  
    </div>
    {%if meta.currentPageId === 'consent' %}
      <div class="govuk-body govuk-grid-column-full">
        <p></p>
        <hr class="govuk-section-break govuk-section-break--visible"/>
        <p>
          The Department for Environment, Food and Rural Affairs (Defra) is the data controller for personal data you give to RPA. For information on how we handle personal data go to <a class="govuk-link" href="https://www.gov.uk" target="_blank" rel="noopener noreferrer">GOV.UK (opens in new tab)</a> and search
          <a class="govuk-link" href="https://www.gov.uk/government/organisations/rural-payments-agency/about/personal-information-charter" target="_blank" rel="noopener noreferrer">Rural Payments Agency personal information charter (opens in new tab).</a>
        </p>
      </div>
    {% endif %} 
  </div>
{% endblock %}