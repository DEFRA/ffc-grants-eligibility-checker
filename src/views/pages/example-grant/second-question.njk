{% extends 'layout.njk' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% block pageTitle %}
  {% if errorList %}
    Error:
  {% endif %}
  {{ title }} - {{ siteTitle }}
{% endblock %}

{% block beforeContent %}
  {% if "{{ meta.previousPageId }}" %}
    {{ govukBackLink({
      id: "backLink",
      text: "Back",
      href: meta.previousPageId
    }) }}
  {% endif %}
  {% if errorList %}
    {{ govukErrorSummary ({
        "titleText": "There is a problem",
        "errorList": errorList
      }) }}
  {% endif %}
{% endblock %}

{% block content %}
  <div id="content" class="govuk-grid-row">
    <h1>Second Question</h1>
    <a id="continueBtn" href="/eligibility-checker/{{ meta.grantTypeId }}/{{ meta.nextPageId }}" role="button" draggable="false" class="govuk-button govuk-button--start govuk-!-margin-top-2 govuk-!-margin-bottom-8"  data-module="govuk-button">
        Next
        <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
          <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"></path>
        </svg>
      </a>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelector(".govuk-back-link").addEventListener("click", (event) => {
      fetch("/eligibility-checker/{{ meta.grantTypeId }}/transition", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ event: "BACK", nextPageId: "{{ meta.nextPageId }}", previousPageId: "{{ meta.previousPageId }}" }),
        })
      });
    });
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById("continueBtn").addEventListener("click", (event) => {
      fetch("/eligibility-checker/{{ meta.grantTypeId }}/transition", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ event: "NEXT", nextPageId: "{{ meta.nextPageId }}", previousPageId: "{{ meta.previousPageId }}"}),
        })
      });
    });
  </script>
{% endblock %}